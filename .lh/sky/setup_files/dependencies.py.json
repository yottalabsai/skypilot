{
    "sourceFile": "sky/setup_files/dependencies.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768469281298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768469281298,
            "name": "Commit-0",
            "content": "\"\"\"Dependencies for SkyPilot.\n\nThis file is imported by setup.py, so:\n- It may not be able to import other skypilot modules, since sys.path may not be\n  correct.\n- It should not import any dependencies, as they may not be installed yet.\n\"\"\"\nimport sys\nfrom typing import Dict, List\n\ninstall_requires = [\n    'wheel<0.46.0',  # https://github.com/skypilot-org/skypilot/issues/5153\n    'cachetools',\n    # NOTE: ray requires click>=7.0.\n    # click 8.2.0 has a bug in parsing the command line arguments:\n    # https://github.com/pallets/click/issues/2894\n    # TODO(aylei): remove this once the bug is fixed in click.\n    'click >= 7.0, < 8.2.0',\n    'colorama',\n    'cryptography',\n    # Jinja has a bug in older versions because of the lack of pinning\n    # the version of the underlying markupsafe package. See:\n    # https://github.com/pallets/jinja/issues/1585\n    'jinja2 >= 3.0',\n    'jsonschema',\n    'networkx',\n    'pandas>=1.3.0',\n    'pendulum',\n    # PrettyTable with version >=2.0.0 is required for the support of\n    # `add_rows` method.\n    'PrettyTable >= 2.0.0',\n    'python-dotenv',\n    'rich',\n    'tabulate',\n    # Light weight requirement, can be replaced with \"typing\" once\n    # we deprecate Python 3.7 (this will take a while).\n    'typing_extensions',\n    'filelock >= 3.6.0',\n    'packaging',\n    'psutil',\n    'pulp',\n    # Cython 3.0 release breaks PyYAML 5.4.*\n    # (https://github.com/yaml/pyyaml/issues/601)\n    # <= 3.13 may encounter https://github.com/ultralytics/yolov5/issues/414\n    'pyyaml > 3.13, != 5.4.*',\n    'requests',\n    'fastapi',\n    'uvicorn[standard]',\n    # Some pydantic versions are not compatible with ray. Adopted from ray's\n    # setup.py:\n    # https://github.com/ray-project/ray/blob/ray-2.9.3/python/setup.py#L254\n    # We need pydantic>=2.0.0 for API server and client.\n    'pydantic!=2.0.*,!=2.1.*,!=2.2.*,!=2.3.*,!=2.4.*,<3,>2',\n    # Required for Form data by pydantic\n    'python-multipart',\n    'aiofiles',\n    'httpx',\n    'setproctitle',\n    'sqlalchemy',\n    'psycopg2-binary',\n    # TODO(hailong): These three dependencies should be removed after we make\n    # the client-side actually not importing them.\n    'casbin',\n    'sqlalchemy_adapter',\n    # Required for API server metrics\n    'prometheus_client>=0.8.0',\n    'passlib',\n    'pyjwt',\n    'gitpython',\n    'types-paramiko',\n    'alembic',\n]\n\nserver_dependencies = [\n    'casbin',\n    'sqlalchemy_adapter',\n    'passlib',\n    'pyjwt',\n]\n\nlocal_ray = [\n    # Lower version of ray will cause dependency conflict for\n    # click/grpcio/protobuf.\n    # Excluded 2.6.0 as it has a bug in the cluster launcher:\n    # https://github.com/ray-project/ray/releases/tag/ray-2.6.1\n    'ray[default] >= 2.2.0, != 2.6.0',\n]\n\nremote = [\n    # Adopted from ray's setup.py:\n    # https://github.com/ray-project/ray/blob/ray-2.9.3/python/setup.py#L251-L252\n    # SkyPilot: != 1.48.0 is required to avoid the error where ray dashboard\n    # fails to start when ray start is called (#2054).\n    # Tracking issue: https://github.com/ray-project/ray/issues/30984\n    'grpcio >= 1.32.0, != 1.48.0; python_version < \\'3.10\\'',\n    'grpcio >= 1.42.0, != 1.48.0; python_version >= \\'3.10\\'',\n    # Adopted from ray's setup.py:\n    # https://github.com/ray-project/ray/blob/ray-2.9.3/python/setup.py#L343\n    'protobuf >= 3.15.3, != 3.19.5',\n]\n\n# NOTE: Change the templates/jobs-controller.yaml.j2 file if any of the\n# following packages dependencies are changed.\naws_dependencies = [\n    # NOTE: this installs CLI V1. To use AWS SSO (e.g., `aws sso login`), users\n    # should instead use CLI V2 which is not pip-installable. See\n    # https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html.\n    'awscli>=1.27.10',\n    'botocore>=1.29.10',\n    'boto3>=1.26.1',\n    # NOTE: required by awscli. To avoid ray automatically installing\n    # the latest version.\n    'colorama < 0.4.5',\n]\n\n# azure-cli cannot be installed normally by uv, so we need to work around it in\n# a few places.\nAZURE_CLI = 'azure-cli>=2.65.0'\n\nextras_require: Dict[str, List[str]] = {\n    'aws': aws_dependencies,\n    # TODO(zongheng): azure-cli is huge and takes a long time to install.\n    # Tracked in: https://github.com/Azure/azure-cli/issues/7387\n    # azure-identity is needed in node_provider.\n    # We need azure-identity>=1.13.0 to enable the customization of the\n    # timeout of AzureCliCredential.\n    'azure': [\n        AZURE_CLI,\n        'azure-core>=1.31.0',\n        'azure-identity>=1.19.0',\n        'azure-mgmt-network>=27.0.0',\n        'azure-mgmt-compute>=33.0.0',\n        'azure-storage-blob>=12.23.1',\n        'msgraph-sdk',\n        'msrestazure',\n    ] + local_ray,\n    # We need google-api-python-client>=2.69.0 to enable 'discardLocalSsd'\n    # parameter for stopping instances. Reference:\n    # https://github.com/googleapis/google-api-python-client/commit/f6e9d3869ed605b06f7cbf2e8cf2db25108506e6\n    'gcp': [\n        'google-api-python-client>=2.69.0',\n        'google-cloud-storage',\n        # see https://github.com/conda/conda/issues/13619\n        # see https://github.com/googleapis/google-api-python-client/issues/2554\n        'pyopenssl >= 23.2.0, <24.3.0',\n    ],\n    'ibm': [\n        'ibm-cloud-sdk-core',\n        'ibm-vpc',\n        'ibm-platform-services>=0.48.0',\n        'ibm-cos-sdk',\n    ] + local_ray,\n    'docker': ['docker'] + local_ray,\n    'lambda': [],  # No dependencies needed for lambda\n    'cloudflare': aws_dependencies,\n    'scp': local_ray,\n    'oci': ['oci'] + local_ray,\n    # Kubernetes 32.0.0 has an authentication bug: https://github.com/kubernetes-client/python/issues/2333 # pylint: disable=line-too-long\n    'kubernetes': ['kubernetes>=20.0.0,!=32.0.0', 'websockets'],\n    'ssh': ['kubernetes>=20.0.0,!=32.0.0', 'websockets'],\n    'remote': remote,\n    # For the container registry auth api. Reference:\n    # https://github.com/runpod/runpod-python/releases/tag/1.6.1\n    'runpod': ['runpod>=1.6.1'],\n    'fluidstack': [],  # No dependencies needed for fluidstack\n    'cudo': ['cudo-compute>=0.1.10'],\n    'paperspace': [],  # No dependencies needed for paperspace\n    'do': ['pydo>=0.3.0', 'azure-core>=1.24.0', 'azure-common'],\n    'vast': ['vastai-sdk>=0.1.12'],\n    'yotta': [],  # No dependencies needed for yotta (uses requests from core)\n    'vsphere': [\n        'pyvmomi==8.0.1.0.2',\n        # vsphere-automation-sdk is also required, but it does not have\n        # pypi release, which cause failure of our pypi release.\n        # https://peps.python.org/pep-0440/#direct-references\n        # We have the instruction for its installation in our\n        # docs instead.\n        # 'vsphere-automation-sdk @ git+https://github.com/vmware/vsphere-automation-sdk-python.git@v8.0.1.0' pylint: disable=line-too-long\n    ],\n    'nebius': [\n        'nebius>=0.2.37',\n    ] + aws_dependencies,\n    'hyperbolic': [],  # No dependencies needed for hyperbolic\n    'server': server_dependencies,\n}\n\n# Nebius needs python3.10. If python 3.9 [all] will not install nebius\nif sys.version_info < (3, 10):\n    filtered_keys = [k for k in extras_require if k != 'nebius']\n    extras_require['all'] = sum(\n        [v for k, v in extras_require.items() if k != 'nebius'], [])\nelse:\n    extras_require['all'] = sum(extras_require.values(), [])\n"
        }
    ]
}