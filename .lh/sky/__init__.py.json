{
    "sourceFile": "sky/__init__.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768543161636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768543161636,
            "name": "Commit-0",
            "content": "\"\"\"The SkyPilot package.\"\"\"\nimport os\nimport subprocess\nfrom typing import Optional\nimport urllib.request\n\nfrom sky.utils import directory_utils\n\n# Replaced with the current commit when building the wheels.\n_SKYPILOT_COMMIT_SHA = '{{SKYPILOT_COMMIT_SHA}}'\n\n\ndef _get_git_commit():\n    if 'SKYPILOT_COMMIT_SHA' not in _SKYPILOT_COMMIT_SHA:\n        # This is a release build, so we don't need to get the commit hash from\n        # git, as it's already been set.\n        return _SKYPILOT_COMMIT_SHA\n\n    # This is a development build (pip install -e .), so we need to get the\n    # commit hash from git.\n    try:\n        cwd = os.path.dirname(__file__)\n        commit_hash = subprocess.check_output(\n            ['git', 'rev-parse', 'HEAD'],\n            cwd=cwd,\n            universal_newlines=True,\n            stderr=subprocess.DEVNULL).strip()\n        changes = subprocess.check_output(['git', 'status', '--porcelain'],\n                                          cwd=cwd,\n                                          universal_newlines=True,\n                                          stderr=subprocess.DEVNULL).strip()\n        if changes:\n            commit_hash += '-dirty'\n        return commit_hash\n    except Exception:  # pylint: disable=broad-except\n        return _SKYPILOT_COMMIT_SHA\n\n\n__commit__ = _get_git_commit()\n__version__ = '1.0.0-dev0'\n__root_dir__ = directory_utils.get_sky_dir()\n\n\n# ---------------------- Proxy Configuration ---------------------- #\ndef _set_http_proxy_env_vars() -> None:\n    urllib_proxies = dict(urllib.request.getproxies())\n\n    def set_proxy_env_var(proxy_var: str, urllib_var: Optional[str]):\n        \"\"\"Sets proxy env vars in os.environ, consulting urllib if needed.\n\n        Logic:\n        - If either PROXY_VAR or proxy_var is set in os.environ, set both to the\n          same value in os.environ.\n        - Else, if urllib_var is set in urllib.request.getproxies(), use that\n          value to set PROXY_VAR and proxy_var in os.environ.\n\n        Although many of our underlying libraries are case-insensitive when it\n        comes to proxy environment variables, some are not. This has happened to\n        GCP's SDK not respecting certain VPN-related proxy env vars.\n\n        This function ensures that both the upper and lower case versions of the\n        proxy environment variables are set if either is set to ensure maximum\n        compatibility.\n        \"\"\"\n        # Check for the uppercase version first\n        proxy = os.getenv(proxy_var.upper(), os.getenv(proxy_var.lower()))\n        if proxy is None and urllib_var is not None:\n            proxy = urllib_proxies.get(urllib_var)\n\n        if proxy is not None:\n            os.environ[proxy_var.lower()] = proxy\n            os.environ[proxy_var.upper()] = proxy\n\n    set_proxy_env_var('http_proxy', 'http')\n    set_proxy_env_var('https_proxy', 'https')\n    set_proxy_env_var('all_proxy', None)\n\n\n_set_http_proxy_env_vars()\n\n# ----------------------------------------------------------------- #\n\n# Keep this order to avoid cyclic imports\n# pylint: disable=wrong-import-position\nfrom sky import backends\nfrom sky import clouds\nfrom sky.admin_policy import AdminPolicy\nfrom sky.admin_policy import MutatedUserRequest\nfrom sky.admin_policy import UserRequest\nfrom sky.catalog import list_accelerators\nfrom sky.client.sdk import api_cancel\nfrom sky.client.sdk import api_info\nfrom sky.client.sdk import api_login\nfrom sky.client.sdk import api_server_logs\nfrom sky.client.sdk import api_start\nfrom sky.client.sdk import api_status\nfrom sky.client.sdk import api_stop\nfrom sky.client.sdk import autostop\nfrom sky.client.sdk import cancel\nfrom sky.client.sdk import cost_report\nfrom sky.client.sdk import down\nfrom sky.client.sdk import download_logs\nfrom sky.client.sdk import endpoints\nfrom sky.client.sdk import exec  # pylint: disable=redefined-builtin\nfrom sky.client.sdk import get\nfrom sky.client.sdk import job_status\nfrom sky.client.sdk import launch\nfrom sky.client.sdk import optimize\nfrom sky.client.sdk import queue\nfrom sky.client.sdk import reload_config\nfrom sky.client.sdk import start\nfrom sky.client.sdk import status\nfrom sky.client.sdk import stop\nfrom sky.client.sdk import storage_delete\nfrom sky.client.sdk import storage_ls\nfrom sky.client.sdk import stream_and_get\nfrom sky.client.sdk import tail_logs\nfrom sky.dag import Dag\nfrom sky.data import Storage\nfrom sky.data import StorageMode\nfrom sky.data import StoreType\nfrom sky.jobs import ManagedJobStatus\nfrom sky.optimizer import Optimizer\nfrom sky.resources import Resources\nfrom sky.server.requests.request_names import AdminPolicyRequestName\nfrom sky.skylet.job_lib import JobStatus\nfrom sky.task import Task\nfrom sky.utils.common import OptimizeTarget\nfrom sky.utils.common import StatusRefreshMode\nfrom sky.utils.config_utils import Config\nfrom sky.utils.registry import CLOUD_REGISTRY\nfrom sky.utils.registry import JOBS_RECOVERY_STRATEGY_REGISTRY\nfrom sky.utils.status_lib import ClusterStatus\n\n# Aliases.\nIBM = clouds.IBM\nAWS = clouds.AWS\nAzure = clouds.Azure\nCudo = clouds.Cudo\nGCP = clouds.GCP\nLambda = clouds.Lambda\nSCP = clouds.SCP\nSlurm = clouds.Slurm\nKubernetes = clouds.Kubernetes\nK8s = Kubernetes\nSSH = clouds.SSH\nOCI = clouds.OCI\nPaperspace = clouds.Paperspace\nPrimeIntellect = clouds.PrimeIntellect\nRunPod = clouds.RunPod\nVast = clouds.Vast\nVsphere = clouds.Vsphere\nFluidstack = clouds.Fluidstack\nNebius = clouds.Nebius\nHyperbolic = clouds.Hyperbolic\nShadeform = clouds.Shadeform\nSeeweb = clouds.Seeweb\nYotta = clouds.Yotta\n\n__all__ = [\n    '__version__',\n    'AWS',\n    'Azure',\n    'Cudo',\n    'GCP',\n    'IBM',\n    'Kubernetes',\n    'K8s',\n    'SSH',\n    'Lambda',\n    'OCI',\n    'Paperspace',\n    'PrimeIntellect',\n    'RunPod',\n    'Vast',\n    'SCP',\n    'Slurm',\n    'Vsphere',\n    'Fluidstack',\n    'Nebius',\n    'Hyperbolic',\n    'Shadeform',\n    'Seeweb',\n    'Yotta',\n    'Optimizer',\n    'OptimizeTarget',\n    'backends',\n    'list_accelerators',\n    '__root_dir__',\n    'Storage',\n    'StorageMode',\n    'StoreType',\n    'ClusterStatus',\n    'JobStatus',\n    'ManagedJobStatus',\n    'StatusRefreshMode',\n    # APIs\n    'Dag',\n    'Task',\n    'Resources',\n    # core APIs\n    'optimize',\n    'launch',\n    'exec',\n    'reload_config',\n    # core APIs\n    'status',\n    'start',\n    'stop',\n    'down',\n    'autostop',\n    'cost_report',\n    'endpoints',\n    # core APIs Job Management\n    'queue',\n    'cancel',\n    'tail_logs',\n    'download_logs',\n    'job_status',\n    # core APIs Storage Management\n    'storage_ls',\n    'storage_delete',\n    # API server APIs\n    'get',\n    'stream_and_get',\n    'api_status',\n    'api_cancel',\n    'api_info',\n    'api_login',\n    'api_start',\n    'api_stop',\n    'api_server_logs',\n    # Admin Policy\n    'UserRequest',\n    'MutatedUserRequest',\n    'AdminPolicy',\n    'Config',\n    'AdminPolicyRequestName',\n    # Registry\n    'CLOUD_REGISTRY',\n    'JOBS_RECOVERY_STRATEGY_REGISTRY',\n]\n"
        }
    ]
}